### 模块的定义

- 在模块中，上下文提供 require() 方法来引入外部模块
- 对应引入的功能，上下文提供了 exports 对象用于导出当前模块的方法或者变量，并且它是唯一导出的路口
- 在模块中，还存在一个 module 对象，它代表模块自身，而 exports 是 module 的属性

### Node 的模块实现

- 路径分析
- 文件定位
- 编译执行

*Node 提供的模块，称为核心模块；用户编写的模块，称为文件模块。*

- 优先从缓存加载

*与前端浏览器会缓存静态脚本文件以提高性能一样， Node 对引入过的模块都会进行缓存，以减少二次引入时的开销。而不同的地方在于，浏览器仅仅缓存文件，而 Node 缓存的是编译和执行之后的对象。*

*不论是核心模块还是文件模块，require() 方法对相同的模块的二次加载都一律采用缓存优先的方式，****这是第一优先级的。***

- 路径分析和文件定位

1. 核心模块的优先级仅次于缓存加载，如果试图加载一个与核心模块标识符相同的自定义模块，那是不会成功的。如果有了编写的一个http用户模块，想要加载成功，必须选择一个不同的标识符或者切换路径的方式
2. 自定义模块，即 node_modules，查找方式类似于原型链或者作用域链
3. 引用效率 缓存 > 核心模块 > 文件模块 > 自定义模块
4. 文件拓展名分析 .js > .json > .node，如果是引用 .json .node 文件时，最好带上拓展名，以节省效率